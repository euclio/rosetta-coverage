<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rust-Rosetta Coverage</title>
    <script src="https://cdn.firebase.com/js/client/2.4.1/firebase.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js" type="text/javascript"></script>
    <script src="https://listjs.com/no-cdn/list.js"></script>
    <link rel="stylesheet" href="vendor/arewewebyet.css" />
  </head>
  <body>
    <header>
      <h1>Rust-Rosetta Coverage</h1>
    </header>
    <p>This site contains a record of every task on <a href="http://rosettacode.org">RosettaCode</a>. Each task is marked as being implemented on <a href="https://github.com/Hoverbear/rust-rosetta">GitHub</a> or on <a href="https://rosettacode.org/wiki/Rust">the wiki</a>.</p>
    <p>Looking to help out? You can:
      <ul>
        <li>Implement any unimplemented tasks, and open a pull request.</li>
        <li>Copy tasks that are only on the wiki to the GitHub repository by opening a pull request (don't forget to write a test!).</li>
        <li>Copy tasks that are only in the GitHub repository to the wiki.</li>
      </ul>
    </p>
    <div id="tasks">
      <small>Loading...</small>
    </div>
    <script id="tasks-template" type="text/x-handlebars-template">
      <input class="search" placeholder="Search" />
      <input type="radio" name="filter" value="all" checked>All</input>
      <input type="radio" name="filter" value="local">GitHub Only</input>
      <input type="radio" name="filter" value="remote">RosettaCode Only</input>
      <input type="radio" name="filter" value="unimplemented">Unimplemented</input>
      <table id="tasks">
        <thead>
          <tr>
            <td>Title</td>
            <td>GitHub</td>
            <td>RosettaCode</td>
          </tr>
        </thead>
        <tbody class="list">
          {{#each this }}
          <tr>
            <td class="title" data-title="{{ this.title }}"><a href="{{ this.url }}">{{ this.title }}</a></td>
            <td class="local done" title="{{#if this.local_code }}Yes{{else}}No{{/if}}">{{#if this.local_code }}<a href="https://github.com/Hoverbear/rust-rosetta/blob/master/{{ this.path }}">✔</a>{{else}}✘{{/if}}</td>
            <td class="remote done" title="{{#if this.remote_code}}Yes{{else}}No{{/if}}">{{#if this.remote_code }}<a href="{{ this.url }}#Rust">✔</a>{{else}}✘{{/if}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </script>
    <footer>
      <p>CSS created for <a href="http://arewewebyet.com">arewewebyet.com</a> by <a href=http://chrismorgan.info/>Chris Morgan</a> et al.; licensed <a rel=license href=http://creativecommons.org/licenses/by/3.0/>CC-BY</a>.</p>
    </footer>
    <script type="text/javascript">
      var tasksTemplate = Handlebars.compile(document.getElementById('tasks-template').textContent);
      var firebase = new Firebase("https://rosetta-coverage.firebaseio.com/");
      firebase.child("tasks").once("value", function(snapshot) {
        var html = tasksTemplate(snapshot.val());
        document.getElementById('tasks').innerHTML = html;

        var taskList = new List('tasks', {
          valueNames: [
            'name',
            { 'name': 'title', 'attr': 'data-title' },
            { 'name': 'local', 'attr': 'title' },
            { 'name': 'remote', 'attr': 'title' },
          ]
        });

        var radioButtons = document.querySelectorAll('input[type=radio');

        [].forEach.call(radioButtons, function(element) {
          element.addEventListener('click', function(event) {
            taskList.filter();

            var filter = event.srcElement.value;
            taskList.filter(function(item) {
              if (filter === 'local') {
                return item.values().local === 'Yes' && item.values().remote === 'No';
              } else if (filter === 'remote') {
                return item.values().remote === 'Yes' && item.values().local === 'No';
              } else if (filter === 'unimplemented') {
                return item.values().remote === 'No' && item.values().local === 'No';
              }

              return true;
            });
          })
        });
      });
    </script>
  </body>
</html>
